%
% Copyright © 2018 Peeter Joot.  All Rights Reserved.
% Licenced as described in the file LICENSE under the root directory of this GIT repository.
%
%{
\makeproblem{Part of Problem 2.2 from Peskin and Schroeder (reproduced below).}{qft:problemSet1:2}{
Consider a complex scalar field with action \( S = \int d^4x\lr{\partial_\mu \phi^\dagger \partial^\mu \phi - m^2 \phi^\dagger \phi}\).  When doing the variational principle consider \( \phi \) and \(\phi^\dagger \) as independent, rather than their real and imaginary parts (this is equivalent, but more convenient).

\makesubproblem{}{qft:problemSet1:2a}
Show that \( H = \int d^3x \lr{ \pi^\dagger \pi + \spacegrad \phi^\dagger \cdot \spacegrad \phi + m^2 \phi^\dagger \phi } \) and that the Klein-Gordon equation is obeyed by \( \phi \) and \( \phi^\dagger\).
\makesubproblem{}{qft:problemSet1:2b}
Introduce complex amplitudes, diagonalize the Hamiltonian, and quantize the theory. Show that the theory has now two sets of particles.
\makesubproblem{}{qft:problemSet1:2c}
Write the charge conserved due to the global \( U(1) \) symmetry,
\begin{dmath}\label{eqn:ProblemSet1Problem2:580}
Q = \int d^3 x \frac{i}{2} \lr{ \phi^\dagger \pi^\dagger - \pi \phi },
\end{dmath}
in
terms of creation and annihilation operators and find the charge of the particles of each type.
} % makeproblem

\makeanswer{qft:problemSet1:2}{
\makeSubAnswer{}{qft:problemSet1:2a}
Classically, evaluating the Euler-Lagrange equations gives us
\begin{dmath}\label{eqn:ProblemSet1Problem2:20}
\begin{aligned}
\PD{\phi}{\LL} &= -m^2 \phi^\dagger \\
\PD{(\partial_\mu \phi)}{\LL} &= \partial^\mu \phi^\dagger \\
\PD{\phi^\dagger}{\LL} &= -m^2 \phi       \\
\PD{(\partial_\mu \phi^\dagger)}{\LL} &= \partial^\mu \phi,
\end{aligned}
\end{dmath}
so the equations of the field are respectively
\begin{dmath}\label{eqn:ProblemSet1Problem2:40}
%\boxedEquation{eqn:ProblemSet1Problem2:40}{
\begin{aligned}
\partial_\mu \partial^\mu \phi^\dagger &=  -m^2 \phi^\dagger \\
\partial_\mu \partial^\mu \phi &=  -m^2 \phi.
\end{aligned}
%}
\end{dmath}
These are Klein-Gordon equations for each field variable \( \phi, \phi^\dagger \) as expected, although this can be made more explicit written out explicitly in the stationary observer frame
\boxedEquation{eqn:ProblemSet1Problem2:340}{
\begin{aligned}
\lr{ \partial_{tt} - \spacegrad^2 + m^2 } \phi^\dagger &= 0 \\
\lr{ \partial_{tt} - \spacegrad^2 + m^2 } \phi &= 0 \\
\end{aligned}
}
To find the Hamiltonian, note that the Lagrangian density written out explicitly is
\begin{dmath}\label{eqn:ProblemSet1Problem2:60}
\LL = \partial_0 \phi^\dagger \partial_0 \phi - (\spacegrad \phi^\dagger) \cdot (\spacegrad \phi) - m^2 \phi^\dagger \phi,
\end{dmath}
so the conjugate momentum densities are
\begin{dmath}\label{eqn:ProblemSet1Problem2:80}
\begin{aligned}
\pi(\Bx, t) &= \PD{(\partial_0 \phi)}{\LL} = \partial_0 \phi^\dagger \\
\pi^\dagger(\Bx, t) &= \PD{(\partial_0 \phi^\dagger)}{\LL} = \partial_0 \phi \\
\end{aligned}
\end{dmath}

The Hamiltonian (including a ``\(p \dot{q}\)'' term for each of \( \phi, \phi^\dagger \)) is
\begin{dmath}\label{eqn:ProblemSet1Problem2:100}
H
= \int d^3 x \lr{ \pi \partial_0 \phi + \pi^\dagger \partial_0 \phi^\dagger - \LL }
=
\int d^3 x \lr{ \pi \pi^\dagger + \pi^\dagger \pi - \pi \pi^\dagger +
(\spacegrad \phi^\dagger) \cdot (\spacegrad \phi) + m^2 \phi^\dagger \phi
 }
=
\int d^3 x \lr{ \pi^\dagger \pi +
(\spacegrad \phi^\dagger) \cdot (\spacegrad \phi) + m^2 \phi^\dagger \phi
 }
\end{dmath}
\makeSubAnswer{}{qft:problemSet1:2b}
To canonically quantize the fields, we promote the fields to operators, demand that we have commutators for conjugate pairs of operators
\begin{equation}\label{eqn:ProblemSet1Problem2:120}
\antisymmetric{\phi(\Bx)}{\pi(\By)}
=
\antisymmetric{\phi^\dagger(\Bx)}{\pi^\dagger(\By)}
= i \delta^3(\Bx - \By),
\end{equation}
and require all the other operator pairs \( \phi \phi^\dagger, \pi \pi^\dagger, \phi^\dagger\pi, \phi\pi^\dagger \) commute.

Before diagonalizing the Hamiltonian, let's verify that applying computing Hamilton's equations using such quantized operators recovers the Klein-Gordon equations we expect.
\begin{subequations}
\label{eqn:ProblemSet1Problem2:700}
\begin{dmath}\label{eqn:ProblemSet1Problem2:720}
\PD{t}{\phi}(\Bx, t)
= i \antisymmetric{H}{\phi(\Bx)}
=
i \int d^3 y \lr{
   \antisymmetric{\pi^\dagger(\By) \pi(\By)}{\phi(\Bx)}
   +
   \cancel{\antisymmetric{ \spacegrad_\By \phi^\dagger(\By) \cdot \spacegrad_\By \phi(\By) }{\phi(\Bx)}}
   +
   \cancel{\antisymmetric{ \phi^\dagger(\By) \phi(\By)  }{\phi(\Bx)}}
}
=
i \int d^3 y \pi^\dagger(\By) \antisymmetric{\pi(\By)}{\phi(\Bx)}
=
i \int d^3 y \pi^\dagger(\By) (-i) \delta(\By - \Bx)
=
\pi^\dagger(\Bx)
\end{dmath}
\begin{dmath}\label{eqn:ProblemSet1Problem2:740}
\PD{t}{\phi^\dagger}(\Bx, t)
= i \antisymmetric{H}{\phi^\dagger(\Bx)}
=
i \int d^3 y \lr{
   \antisymmetric{\pi^\dagger(\By) \pi(\By)}{\phi^\dagger(\Bx)}
   +
   \cancel{\antisymmetric{ \spacegrad_\By \phi^\dagger(\By) \cdot \spacegrad_\By \phi(\By) }{\phi^\dagger(\Bx)}}
   +
   m^2 \cancel{\antisymmetric{ \phi^\dagger(\By) \phi(\By)  }{\phi^\dagger(\Bx)}}
}
=
i \int d^3 y \pi(\By) \antisymmetric{\pi^\dagger(\By)}{\phi^\dagger(\Bx)}
=
i \int d^3 y \pi(\By) (-i) \delta(\By - \Bx)
=
\pi(\Bx)
\end{dmath}
\begin{dmath}\label{eqn:ProblemSet1Problem2:760}
\PD{t}{\pi}(\Bx, t)
=
i \antisymmetric{H}{\pi(\Bx)}
=
i \int d^3 y \lr{
   \cancel{\antisymmetric{\pi^\dagger(\By) \pi(\By)}{\pi(\Bx)}}
   +
   \antisymmetric{ \spacegrad_\By \phi^\dagger(\By) \cdot \spacegrad_\By \phi(\By) }{\pi(\Bx)}
   +
   m^2 \antisymmetric{ \phi^\dagger(\By) \phi(\By)  }{\pi(\Bx)}
}
=
i \int d^3 y \lr{
   \spacegrad_\By \phi^\dagger(\By) \cdot \spacegrad_\By \antisymmetric{ \phi(\By) }{\pi(\Bx)}
   +
   m^2 \phi^\dagger(\By) \antisymmetric{ \phi(\By)  }{\pi(\Bx)}
}
=
i \int d^3 y \lr{
   \spacegrad_\By \phi^\dagger(\By) \cdot \spacegrad_\By (i \delta^3(\By - \Bx))
   +
   m^2 \phi^\dagger(\By) i \delta^3(\By - \Bx)
}
=
- \int d^3 y \lr{
   \spacegrad_\By \cdot \lr{ \delta^3(\By - \Bx) \spacegrad_\By \phi^\dagger(\By) }
   -
   \delta^3(\By - \Bx) \spacegrad_\By^2 \phi^\dagger(\By)
}
- m^2 \phi^\dagger(\Bx)
=
   \spacegrad^2 \phi^\dagger(\Bx)
- m^2 \phi^\dagger(\Bx).
\end{dmath}
\begin{dmath}\label{eqn:ProblemSet1Problem2:780}
\PD{t}{\pi^\dagger}(\Bx, t)
=
i \antisymmetric{H}{\pi^\dagger(\Bx)}
=
i \int d^3 y \lr{
   \cancel{\antisymmetric{\pi^\dagger(\By) \pi(\By)}{\pi^\dagger(\Bx)}}
   +
   \antisymmetric{ \spacegrad_\By \phi^\dagger(\By) \cdot \spacegrad_\By \phi(\By) }{\pi^\dagger(\Bx)}
   +
   m^2 \antisymmetric{ \phi^\dagger(\By) \phi(\By)  }{\pi^\dagger(\Bx)}
}
=
i \int d^3 y \lr{
   \spacegrad_\By \phi(\By) \cdot \spacegrad_\By \antisymmetric{ \phi^\dagger(\By) }{\pi^\dagger(\Bx)}
   +
   m^2 \phi(\By) \antisymmetric{ \phi^\dagger(\By)  }{\pi^\dagger(\Bx)}
}
=
i \int d^3 y \lr{
   \spacegrad_\By \phi(\By) \cdot \spacegrad_\By (i \delta^3(\By - \Bx))
   +
   m^2 \phi(\By) i \delta^3(\By - \Bx)
}
=
- \int d^3 y \lr{
   \spacegrad_\By \cdot \lr{ \delta^3(\By - \Bx) \spacegrad_\By \phi(\By) }
   -
   \delta^3(\By - \Bx) \spacegrad_\By^2 \phi(\By)
}
- m^2 \phi(\Bx)
=
   \spacegrad^2 \phi(\Bx)
- m^2 \phi(\Bx).
\end{dmath}
\end{subequations}
This recovers the Klein-Gordon equations
\begin{dmath}\label{eqn:ProblemSet1Problem2:820}
\begin{aligned}
\lr{ \PDSq{t}{} - \spacegrad^2 + m^2 } &\phi(\Bx, t) = 0 \\
\lr{ \PDSq{t}{} - \spacegrad^2 + m^2 } &\phi^\dagger(\Bx, t) = 0,
\end{aligned}
\end{dmath}
consistent with \cref{eqn:ProblemSet1Problem2:340} found by evaluating the classical Euler-Lagrange equations.

Somewhat cavalierly, the divergence integrals of the delta function above were assumed to be zero.
One possible justification for killing the delta function divergence integrals above first transforms those into surface integrals
\begin{dmath}\label{eqn:ProblemSet1Problem2:800}
\int_V d^3 y \spacegrad_\By \cdot \lr{ \delta^3(\By - \Bx) \spacegrad_\By f(\By) }
=
\int_{\partial V} dA_\By \delta^3(\By - \Bx) \ncap_\By \cdot \spacegrad_\By f(\By),
\end{dmath}
after which one argue that this is non-zero only when \( \Bx \) is on the boundary, so if we let the boundary go to infinity, it is zero everywhere, regardless of the normal derivative of the function being operated on\footnote{This was Prof. Poppitz's argument.  It's not completely convincing to me, as it requires integrating a delta function that may sit on the boundary.  However, what is the meaning of such a boundary integral, such as \( \int_0^\infty \delta(x) dx \)?  Apparently, such integrals are considered well defined in field theory, and we'll end up encountering these later too, and one of the future problems will help us understand an interpretation.}.
%\citep{DavidMayrhofer} where the author starts with separate real and imaginary fields and builds the complex representation systematically.

\paragraph{Diagonal basis for the Hamiltonian.}
In class we saw that a momentum space representation of \( \phi, \pi \) for the scalar single field Lagrangian simplified the Hamiltonian considerably.
Let's assume a similar momentum space representation of our field operator
\begin{dmath}\label{eqn:ProblemSet1Problem2:840}
\wtilde{\phi}(\Bp, t) = \inv{\sqrt{2 \omega_\Bp}} \lr{ e^{-i \omega_\Bp t} a_\Bp + e^{i \omega_\Bp t} b^\dagger_\Bp },
\end{dmath}
but will not make any a-priori assumption that the quantized field operator \( \phi \) is Hermitian.
We find the following spatial representation of the operator \( \phi \) and it's relations
\begin{subequations}
\label{eqn:ProblemSet1Problem2:860}
\begin{dmath}\label{eqn:ProblemSet1Problem2:880}
\phi(\Bx, t) =
\int \frac{d^3 p}{(2\pi)^3} e^{i \Bp \cdot \Bx}
\inv{\sqrt{2 \omega_\Bp}} \lr{ e^{-i \omega_\Bp t} a_\Bp + e^{i \omega_\Bp t} b^\dagger_\Bp }
\end{dmath}
\begin{dmath}\label{eqn:ProblemSet1Problem2:900}
\phi^\dagger(\Bx, t) =
\int \frac{d^3 p}{(2\pi)^3} e^{-i \Bp \cdot \Bx}
\inv{\sqrt{2 \omega_\Bp}} \lr{ e^{i \omega_\Bp t} a_\Bp^\dagger + e^{-i \omega_\Bp t} b_\Bp }
\end{dmath}
\begin{dmath}\label{eqn:ProblemSet1Problem2:1140}
\spacegrad \phi(\Bx, t) =
\int \frac{d^3 p}{(2\pi)^3} e^{i \Bp \cdot \Bx}
\frac{i \Bp}{\sqrt{2 \omega_\Bp}} \lr{ e^{-i \omega_\Bp t} a_\Bp + e^{i \omega_\Bp t} b^\dagger_\Bp }
\end{dmath}
\begin{dmath}\label{eqn:ProblemSet1Problem2:1160}
\spacegrad \phi^\dagger(\Bx, t) =
\int \frac{d^3 p}{(2\pi)^3} e^{-i \Bp \cdot \Bx}
\frac{-i \Bp}{\sqrt{2 \omega_\Bp}} \lr{ e^{i \omega_\Bp t} a_\Bp^\dagger + e^{-i \omega_\Bp t} b_\Bp }
\end{dmath}
\begin{dmath}\label{eqn:ProblemSet1Problem2:920}
\pi(\Bx, t) = \PD{t}{\phi^\dagger}
=
\int \frac{d^3 p}{(2\pi)^3} e^{-i \Bp \cdot \Bx}
\frac{i \omega_\Bp}{\sqrt{2 \omega_\Bp}} \lr{ e^{i \omega_\Bp t} a_\Bp^\dagger - e^{-i \omega_\Bp t} b_\Bp }
\end{dmath}
\begin{dmath}\label{eqn:ProblemSet1Problem2:940}
\pi^\dagger(\Bx, t) = \PD{t}{\phi}
=
\int \frac{d^3 p}{(2\pi)^3} e^{i \Bp \cdot \Bx}
\frac{i\omega_\Bp}{\sqrt{2 \omega_\Bp}} \lr{ -e^{-i \omega_\Bp t} a_\Bp + e^{i \omega_\Bp t} b^\dagger_\Bp }.
\end{dmath}
\end{subequations}
By inspection, we may read off the Fourier transform of \( \wtilde{\pi^\dagger} \), which is
\begin{dmath}\label{eqn:ProblemSet1Problem2:960}
\wtilde{\pi^\dagger}(\Bp, t)
=
\frac{i\omega_\Bp}{\sqrt{2 \omega_\Bp}} \lr{ -e^{-i \omega_\Bp t} a_\Bp + e^{i \omega_\Bp t} b^\dagger_\Bp },
\end{dmath}
which allows, with \cref{eqn:ProblemSet1Problem2:840}, inversion for operators \( a_\Bp, b^\dagger_\Bp \)
\begin{dmath}\label{eqn:ProblemSet1Problem2:980}
\begin{aligned}
a_\Bp &= e^{i\omega_\Bp t} \sqrt{\frac{\omega_\Bp}{2}} \lr{ \wtilde{\phi} - \inv{i \omega_\Bp} \wtilde{\pi^\dagger} } \\
b_\Bp^\dagger &= e^{-i\omega_\Bp t} \sqrt{\frac{\omega_\Bp}{2}} \lr{ \wtilde{\phi} + \inv{i \omega_\Bp} \wtilde{\pi^\dagger} },
\end{aligned}
\end{dmath}
or, in terms of spatial operators
\begin{dmath}\label{eqn:ProblemSet1Problem2:1000}
\begin{aligned}
a_\Bp &=
\int d^3 x e^{-i \Bp \cdot \Bx}
e^{i\omega_\Bp t} \sqrt{\frac{\omega_\Bp}{2}} \lr{ \phi(\Bx, t) - \inv{i \omega_\Bp} \pi^\dagger(\Bx, t) } \\
a_\Bp^\dagger &=
\int d^3 x e^{i \Bp \cdot \Bx}
e^{-i\omega_\Bp t} \sqrt{\frac{\omega_\Bp}{2}} \lr{ \phi^\dagger(\Bx, t) + \inv{i \omega_\Bp} \pi(\Bx, t) } \\
b_\Bp &=
\int d^3 x e^{i \Bp \cdot \Bx}
e^{i\omega_\Bp t} \sqrt{\frac{\omega_\Bp}{2}} \lr{ \phi^\dagger(\Bx, t) - \inv{i \omega_\Bp} \pi(\Bx, t) } \\
b_\Bp^\dagger &=
\int d^3 x e^{-i \Bp \cdot \Bx}
e^{-i\omega_\Bp t} \sqrt{\frac{\omega_\Bp}{2}} \lr{ \phi(\Bx, t) + \inv{i \omega_\Bp} \pi^\dagger(\Bx, t) }.
\end{aligned}
\end{dmath}
%a_\Bq^\dagger &=
%\int d^3 y e^{i \Bq \cdot \By}
%e^{-i\omega_\Bq t} \sqrt{\frac{\omega_\Bq}{2}} \lr{ \phi^\dagger(\By, t) + \inv{i \omega_\Bq} \pi(\By, t) } \\
%b_\Bq &=
%\int d^3 y e^{i \Bq \cdot \By}
%e^{i\omega_\Bq t} \sqrt{\frac{\omega_\Bq}{2}} \lr{ \phi^\dagger(\By, t) - \inv{i \omega_\Bq} \pi(\By, t) }
%b_\Bq^\dagger &=
%\int d^3 y e^{-i \Bq \cdot \By}
%e^{-i\omega_\Bq t} \sqrt{\frac{\omega_\Bq}{2}} \lr{ \phi(\By, t) + \inv{i \omega_\Bq} \pi^\dagger(\By, t) }.
We seek the commutators of all the \cref{eqn:ProblemSet1Problem2:1000} Fourier coefficient operators, which we expect to behave like creation and annihilation operators.  By inspection
\( 0 =
\antisymmetric{a_\Bp}{b_\Bq^\dagger}
=
\antisymmetric{a_\Bp}{a_\Bq}
=
\antisymmetric{b_\Bp}{a_\Bq^\dagger}
=
\antisymmetric{b_\Bp}{b_\Bq}
\), but the rest require evaluation.  We expect \( 0
= \antisymmetric{a_\Bp}{b_\Bq}
= \antisymmetric{a_\Bp^\dagger}{b_\Bq^\dagger} \) and explicit expansion confirms this
\begin{subequations}
\label{eqn:ProblemSet1Problem2:1020}
\begin{dmath}\label{eqn:ProblemSet1Problem2:1040}
\antisymmetric{a_\Bp}{b_\Bq}
=
\int d^3 x
d^3 y
e^{-i \Bp \cdot \Bx}
e^{i \Bq \cdot \By}
e^{i\omega_\Bp t}
e^{i\omega_\Bq t}
\sqrt{\frac{\omega_\Bp}{2}}
\sqrt{\frac{\omega_\Bq}{2}}
\antisymmetric{ \phi(\Bx, t) - \inv{i \omega_\Bp} \pi^\dagger(\Bx, t) }
{ \phi^\dagger(\By, t) - \inv{i \omega_\Bq} \pi(\By, t) }
=
\int
d^3 x
d^3 y
e^{-i \Bp \cdot \Bx}
e^{i \Bq \cdot \By}
e^{i\omega_\Bp t}
e^{i\omega_\Bq t}
\sqrt{\frac{\omega_\Bp}{2}}
\sqrt{\frac{\omega_\Bq}{2}}
\lr{
   -\inv{i \omega_\Bq} i \delta^3(\Bx - \By)
   -\inv{i \omega_\Bp} (-i) \delta^3(\Bx - \By)
}
=
\inv{2} \int d^3 x e^{i (\Bq - \Bp) \cdot \Bx}
e^{i\omega_\Bp t}
e^{i\omega_\Bq t}
\sqrt{\omega_\Bp \omega_\Bq}
\lr{
   -\inv{ \omega_\Bq}
   +\inv{ \omega_\Bp}
}
=
(2 \pi)^3 \delta(\Bq - \Bp)
y^{i\omega_\Bp t}
e^{i\omega_\Bq t}
\sqrt{\omega_\Bp \omega_\Bq}
\lr{
   -\inv{ \omega_\Bq}
   +\inv{ \omega_\Bp}
}
= 0,
\end{dmath}
\begin{dmath}\label{eqn:ProblemSet1Problem2:1060}
\antisymmetric{a_\Bp^\dagger}{b_\Bq^\dagger}
=
\int
d^3 x
d^3 y
e^{i \Bp \cdot \Bx}
e^{-i \Bq \cdot \By}
e^{-i\omega_\Bp t}
e^{-i\omega_\Bq t}
\sqrt{\frac{\omega_\Bp}{2}}
\sqrt{\frac{\omega_\Bq}{2}}
\antisymmetric{ \phi^\dagger(\Bx, t) + \inv{i \omega_\Bp} \pi(\Bx, t) }
{ \phi(\By, t) + \inv{i \omega_\Bq} \pi^\dagger(\By, t) }
=
\int
d^3 x
d^3 y
e^{i \Bp \cdot \Bx}
e^{-i \Bq \cdot \By}
e^{-i\omega_\Bp t}
e^{-i\omega_\Bq t}
\sqrt{\frac{\omega_\Bp}{2}}
\sqrt{\frac{\omega_\Bq}{2}}
\lr{
   +\inv{i \omega_\Bq} i \delta^3(\Bx - \By)
   +\inv{i \omega_\Bp} (-i) \delta^3(\Bx - \By)
}
=
\inv{2} \int d^3 x e^{i (\Bp - \Bq) \cdot \Bx}
e^{-i\omega_\Bp t}
e^{-i\omega_\Bq t}
\sqrt{\omega_\Bp \omega_\Bq}
\lr{
   \inv{ \omega_\Bq}
   -\inv{ \omega_\Bp}
}
=
(2 \pi)^3 \delta(\Bp - \Bq)
e^{i\omega_\Bp t}
e^{i\omega_\Bq t}
\sqrt{\omega_\Bp \omega_\Bq}
\lr{
   \inv{ \omega_\Bq}
   - \inv{ \omega_\Bp}
}
= 0.
\end{dmath}
\end{subequations}
Finally, we expect that there are two pairs of non-zero commutators
\begin{subequations}
\label{eqn:ProblemSet1Problem2:1080}
\begin{dmath}\label{eqn:ProblemSet1Problem2:1100}
\antisymmetric{a_\Bp}{a_\Bq^\dagger}
=
\int d^3 x
d^3 y
e^{-i \Bp \cdot \Bx}
e^{i \Bq \cdot \By}
e^{i\omega_\Bp t}
e^{-i\omega_\Bq t}
\sqrt{\frac{\omega_\Bp}{2}}
\sqrt{\frac{\omega_\Bq}{2}}
\antisymmetric{ \phi(\Bx, t) - \inv{i \omega_\Bp} \pi^\dagger(\Bx, t) }
{ \phi^\dagger(\By, t) + \inv{i \omega_\Bq} \pi(\By, t) }
=
\inv{2} \int d^3 x
d^3 y
e^{-i \Bp \cdot \Bx}
e^{i \Bq \cdot \By}
e^{i\omega_\Bp t}
e^{-i\omega_\Bq t}
\sqrt{\omega_\Bp \omega_\Bq}
\lr{
   \inv{i \omega_\Bq} i \delta^3(\Bx - \By)
   -\inv{i \omega_\Bp} (-i) \delta^3(\Bx - \By)
}
=
\inv{2} \int d^3 x
e^{i (\Bq -\Bp)\cdot \Bx}
e^{i\omega_\Bp t}
e^{-i\omega_\Bq t}
\sqrt{\omega_\Bp \omega_\Bq}
\lr{
   \inv{ \omega_\Bq}
   +\inv{ \omega_\Bp}
}
=
\inv{2} (2 \pi)^3 \delta(\Bq - \Bp)
e^{i\omega_\Bp t}
e^{-i\omega_\Bq t}
\sqrt{\omega_\Bp \omega_\Bq}
\lr{
   \inv{ \omega_\Bq}
   +\inv{ \omega_\Bp}
}
=
(2 \pi)^3 \delta(\Bq - \Bp),
\end{dmath}
\begin{dmath}\label{eqn:ProblemSet1Problem2:1120}
\antisymmetric{b_\Bp}{b_\Bq^\dagger}
=
\int d^3 x
d^3 y
e^{i \Bp \cdot \Bx}
e^{-i \Bq \cdot \By}
e^{i\omega_\Bp t}
e^{-i\omega_\Bq t}
\sqrt{\frac{\omega_\Bp}{2}}
\sqrt{\frac{\omega_\Bq}{2}}
\antisymmetric
{ \phi^\dagger(\Bx, t) - \inv{i \omega_\Bp} \pi(\Bx, t) }
{ \phi(\By, t) + \inv{i \omega_\Bq} \pi^\dagger(\By, t) }
=
\int d^3 x
d^3 y
e^{i \Bp \cdot \Bx}
e^{-i \Bq \cdot \By}
e^{i\omega_\Bp t}
e^{-i\omega_\Bq t}
\sqrt{\frac{\omega_\Bp}{2}}
\sqrt{\frac{\omega_\Bq}{2}}
\lr{
   \inv{i \omega_\Bq} i \delta^3(\Bx - \By)
   -\inv{i \omega_\Bp} (-i) \delta^3(\Bx - \By)
}
=
\inv{2} \int d^3 x
e^{i (\Bp -\Bq)\cdot \Bx}
e^{i\omega_\Bp t}
e^{-i\omega_\Bq t}
\sqrt{\omega_\Bp \omega_\Bq}
\lr{
   \inv{ \omega_\Bq}
   +\inv{ \omega_\Bp}
}
=
\inv{2}
(2 \pi)^3
\delta^3(\Bp - \Bq)
e^{i\omega_\Bp t}
e^{-i\omega_\Bq t}
\sqrt{\omega_\Bp \omega_\Bq}
\lr{
   \inv{ \omega_\Bq}
   +\inv{ \omega_\Bp}
}
=
(2 \pi)^3
\delta^3(\Bp - \Bq).
\end{dmath}
\end{subequations}
Other than the \( (2 \pi)^3 \) scale factor we see from the commutators \( \antisymmetric{a_\Bp^\dagger}{a_\Bq^\dagger}, \antisymmetric{b_\Bp^\dagger}{b_\Bq^\dagger} \) that the fields may be represented as a pair of independent creation and annihilation operators.

Let's compute the Hamiltonian representation next to verify that it diagonalizes nicely with this representation.
We use \cref{eqn:ProblemSet1Problem2:860} to find
\begin{subequations}
\label{eqn:ProblemSet1Problem2:1180}
\begin{dmath}\label{eqn:ProblemSet1Problem2:1200}
\int d^3 x \pi^\dagger \pi
=
\int d^3 x
\frac{d^3 p}{(2\pi)^3}
\frac{d^3 q}{(2\pi)^3}
e^{i \Bp \cdot \Bx}
e^{-i \Bq \cdot \Bx}
\frac{i \omega_\Bp}{\sqrt{2 \omega_\Bp}}
\frac{i \omega_\Bq}{\sqrt{2 \omega_\Bq}}
\lr{ -e^{-i \omega_\Bp t} a_\Bp + e^{i \omega_\Bp t} b^\dagger_\Bp }
\lr{ e^{i \omega_\Bq t} a_\Bq^\dagger - e^{-i \omega_\Bq t} b_\Bq }
=
\inv{2} \int
\frac{d^3 p}{(2\pi)^3}
\omega_\Bp
\lr{ e^{-i \omega_\Bp t} a_\Bp - e^{i \omega_\Bp t} b^\dagger_\Bp }
\lr{ e^{i \omega_\Bp t} a_\Bp^\dagger - e^{-i \omega_\Bp t} b_\Bp }
=
\inv{2} \int
\frac{d^3 p}{(2\pi)^3}
\omega_\Bp
\lr{
   a_\Bp a_\Bp^\dagger + b_\Bp^\dagger b_\Bp
   + e^{ 2 i \omega_\Bp t} (-b_\Bp^\dagger a_\Bp^\dagger) +
   + e^{ -2 i \omega_\Bp t} (-a_\Bp b_\Bp )
},
\end{dmath}
\begin{dmath}\label{eqn:ProblemSet1Problem2:1220}
\begin{aligned}
\int d^3 x &\lr{ \spacegrad \phi^\dagger \cdot \spacegrad \phi + m^2 \phi^\dagger \phi } \\
&=
\inv{2} \int d^3 x
\frac{d^3 p}{(2\pi)^3}
\frac{d^3 q}{(2\pi)^3}
e^{i (\Bq -\Bp) \cdot \Bx}
\frac{ (\Bp \cdot \Bq + m^2) }{\sqrt{\omega_\Bp \omega_\Bq}}
\lr{ e^{i \omega_\Bp t} a_\Bp^\dagger + e^{-i \omega_\Bp t} b_\Bp }
\lr{ e^{-i \omega_\Bq t} a_\Bq + e^{i \omega_\Bq t} b^\dagger_\Bq } \\
&=
\inv{2} \int
d^3 p
\frac{d^3 q}{(2\pi)^3}
\delta^3(\Bq - \Bp)
\frac{ (\Bp \cdot \Bq + m^2) }{\sqrt{\omega_\Bp \omega_\Bq}}
\lr{ e^{i \omega_\Bp t} a_\Bp^\dagger + e^{-i \omega_\Bp t} b_\Bp }
\lr{ e^{-i \omega_\Bq t} a_\Bq + e^{i \omega_\Bq t} b^\dagger_\Bq } \\
&=
\inv{2} \int
\frac{d^3 p}{(2\pi)^3}  \omega_\Bp
\lr{ e^{i \omega_\Bp t} a_\Bp^\dagger + e^{-i \omega_\Bp t} b_\Bp }
\lr{ e^{-i \omega_\Bp t} a_\Bp + e^{i \omega_\Bp t} b^\dagger_\Bp } \\
&=
\inv{2} \int
\frac{d^3 p}{(2\pi)^3}  \omega_\Bp
\lr{
   a_\Bp^\dagger
   a_\Bp
   +
   b_\Bp
   b_\Bp^\dagger
   +
   e^{2 i \omega_\Bp t} \lr{ a_\Bp^\dagger b_\Bp^\dagger }
   +
   e^{-2 i \omega_\Bp t} \lr{ b_\Bp a_\Bp }
}
\end{aligned}
\end{dmath}
\end{subequations}
Summing \cref{eqn:ProblemSet1Problem2:1180}, we find the
Hamiltonian has the expected diagonal representation
\begin{dmath}\label{eqn:ProblemSet1Problem2:1240}
H =
\inv{2}
\int
\frac{d^3 p}{(2\pi)^3}
\omega_\Bp
\lr{
   a_\Bp^\dagger a_\Bp
+
   a_\Bp a_\Bp^\dagger
+ b_\Bp^\dagger b_\Bp
+
   b_\Bp b_\Bp^\dagger
},
\end{dmath}
or in normal form
\boxedEquation{eqn:ProblemSet1Problem2:1260}{
:H: =
\int
\frac{d^3 p}{(2\pi)^3}
\omega_\Bp
\lr{
   a_\Bp^\dagger a_\Bp
+ b_\Bp^\dagger b_\Bp
}.
}

\makeSubAnswer{}{qft:problemSet1:2c}

Before diving into computation, it is worth deriving \cref{eqn:ProblemSet1Problem2:580} manually, since the niave calculation using the current as derived in class differs slightly.  We can find the current/charge as stated in the problem if our variation maintains the order of the conjugate pairs.  The symmetry is that imposed by the transformation

\begin{dmath}\label{eqn:ProblemSet1Problem2:1300}
\begin{aligned}
\phi(x) &\rightarrow e^{-i\theta/2} \phi(x) \approx (1 - i\theta/2)\phi(x) \\
\phi^\dagger(x) &\rightarrow e^{i\theta/2} \phi^\dagger(x) \approx (1 + i\theta/2)\phi^\dagger(x),
\end{aligned}
\end{dmath}
or
\begin{dmath}\label{eqn:ProblemSet1Problem2:1320}
\begin{aligned}
\delta \phi(x) &= -\frac{i}{2} \theta \phi(x) \\
\delta \phi^\dagger(x) &= \frac{i}{2} \theta \phi^\dagger(x).
\end{aligned}
\end{dmath}

The Lagrangian is left unchanged by this transformation, so we can determine the current directly by varying the action, but do so leaving the order of the \(\phi^\dagger\) and \( \phi\) terms in the Lagrangian unchanged
\begin{dmath}\label{eqn:ProblemSet1Problem2:1340}
\delta S
= \int d^4 x \delta \lr{ \partial_\mu \phi^\dagger \partial^\mu \phi - m^2 \phi^\dagger \phi }
= \int d^4 x
\lr{
   \delta\lr{ \partial_\mu \phi^\dagger } \partial^\mu \phi
  + \partial^\mu \phi^\dagger \delta \lr{ \partial_\mu \phi }
   - m^2 \lr{\delta \phi^\dagger} \phi
  - m^2 \phi^\dagger \lr{\delta \phi}
}
= \int d^4 x
\lr{
   \partial_\mu \lr{ \lr{ \delta \phi^\dagger} \partial^\mu \phi }
-
   \lr{\delta \phi^\dagger} \lr{\partial_\mu \partial^\mu \phi}
 + \partial_\mu \lr{ \partial^\mu \phi^\dagger \delta \phi }
 - \lr{ \partial_\mu \partial^\mu \phi^\dagger } \delta \phi
   - m^2 \lr{ \delta \phi^\dagger} \phi - m^2 \phi^\dagger \lr{ \delta \phi}
}
=
\int d^4 x
\partial_\mu
\lr{
   \delta \phi^\dagger \partial^\mu \phi
 + \partial^\mu \phi^\dagger \delta \phi
}
-
\int d^4 x
\delta \phi^\dagger
\lr{
   \lr{\partial_\mu \partial^\mu \phi}
+ m^2 \phi
}
-
\int d^4 x
\lr{
 \partial_\mu \partial^\mu \phi^\dagger
+ m^2 \phi^\dagger
}
\delta \phi
=
\int d^4 x
\partial_\mu
\lr{
   \delta \phi^\dagger \partial^\mu \phi
 + \partial^\mu \phi^\dagger \delta \phi
},
\end{dmath}
where the Euler-Lagrange equations for each of the fields has been imposed to kill off the last two integrals.  We are left with a current
\begin{dmath}\label{eqn:ProblemSet1Problem2:1360}
j^\mu =
   \delta \phi^\dagger \partial^\mu \phi
 + \partial^\mu \phi^\dagger \delta \phi
=
\frac{i\theta}{2} \lr{
   \phi^\dagger \lr{ \partial^\mu \phi }
 - \lr{ \partial^\mu \phi^\dagger} \phi
}.
\end{dmath}
In particular
\begin{dmath}\label{eqn:ProblemSet1Problem2:1380}
\evalbar{j^0}{\theta = 1}
=
\frac{i}{2} \lr{
   \phi^\dagger \lr{ \partial^0 \phi }
 - \lr{ \partial^0 \phi^\dagger} \phi
}
=
\frac{i}{2} \lr{
   \phi^\dagger \pi^\dagger - \pi \phi
}.
\end{dmath}
This recovers \cref{eqn:ProblemSet1Problem2:580}, and we are now set to compute the charge by plugging in
\cref{eqn:ProblemSet1Problem2:580}
\begin{dmath}\label{eqn:ProblemSet1Problem2:600}
Q =
\frac{i}{2}
\int d^3 x
\lr{ \phi^\dagger \pi^\dagger - \pi \phi }
=
\frac{i}{4}
\int d^3 x
\frac{d^3 p}{(2\pi)^3}
\frac{d^3 q}{(2\pi)^3}
e^{i (\Bq -\Bp) \cdot \Bx}
\frac{i\omega_\Bq}{\sqrt{\omega_\Bp\omega_\Bq}}
\lr{ e^{i \omega_\Bp t} a_\Bp^\dagger + e^{-i \omega_\Bp t} b_\Bp }
\lr{ -e^{-i \omega_\Bq t} a_\Bq + e^{i \omega_\Bq t} b^\dagger_\Bq }
-
\frac{i}{4}
\int d^3 x
\frac{d^3 p}{(2\pi)^3}
\frac{d^3 q}{(2\pi)^3}
e^{i (\Bp -\Bq)\cdot \Bx}
\frac{i \omega_\Bp}{\sqrt{\omega_\Bp\omega_\Bq}}
\lr{ e^{i \omega_\Bp t} a_\Bp^\dagger - e^{-i \omega_\Bp t} b_\Bp }
\lr{ e^{-i \omega_\Bq t} a_\Bq + e^{i \omega_\Bq t} b^\dagger_\Bq }
=
\frac{1}{4}
\int
\frac{d^3 p}{(2\pi)^3}
\lr{
   \lr{ e^{i \omega_\Bp t} a_\Bp^\dagger - e^{-i \omega_\Bp t} b_\Bp }
   \lr{ e^{-i \omega_\Bp t} a_\Bp + e^{i \omega_\Bp t} b^\dagger_\Bp }
   -
   \lr{ e^{i \omega_\Bp t} a_\Bp^\dagger + e^{-i \omega_\Bp t} b_\Bp }
   \lr{ -e^{-i \omega_\Bp t} a_\Bp + e^{i \omega_\Bp t} b^\dagger_\Bp }
}
=
\frac{1}{4}
\int
\frac{d^3 p}{(2\pi)^3}
\lr{
   a_\Bp^\dagger a_\Bp - b_\Bp b_\Bp^\dagger + a_\Bp^\dagger a_\Bp - b_\Bp b_\Bp^\dagger
   + e^{2 i \omega_\Bp t} \lr{ b_\Bp^\dagger a_\Bp^\dagger  -a_\Bp^\dagger b_\Bp^\dagger }
   + e^{-2 i \omega_\Bp t} \lr{ -b_\Bp a_\Bp + b_\Bp a_\Bp }
}
=
\frac{1}{2}
\int
\frac{d^3 p}{(2\pi)^3}
\lr{
   a_\Bp^\dagger a_\Bp - b_\Bp b_\Bp^\dagger
},
\end{dmath}
or, in normal order
\boxedEquation{eqn:ProblemSet1Problem2:1280}{
:Q:
=
\frac{1}{2}
\int
\frac{d^3 p}{(2\pi)^3}
\lr{
   a_\Bp^\dagger a_\Bp - b_\Bp^\dagger b_\Bp
}
}
To understand the action of the charge operator (a set of number operators) we may apply it to the states corresponding to each creation operator.  With
\begin{dmath}\label{eqn:ProblemSet1Problem2:640}
\begin{aligned}
\ket{\Bk}_a &= a^\dagger_\Bk \ket{0} \\
\ket{\Bk}_b &= b^\dagger_\Bk \ket{0},
\end{aligned}
\end{dmath}
we find
\begin{dmath}\label{eqn:ProblemSet1Problem2:660}
Q \ket{\Bk}_a =
\frac{1}{2} \int
\frac{d^3 p}{(2\pi)^3}
\lr{
a_\Bp^\dagger a_\Bp - b_\Bp^\dagger b_\Bp
}
a^\dagger_\Bk \ket{0}
=
\frac{1}{2} \int
\frac{d^3 p}{(2\pi)^3}
a_\Bp^\dagger a_\Bp
a^\dagger_\Bk \ket{0}
=
\frac{1}{2} \int
\frac{d^3 p}{(2\pi)^3}
a_\Bp^\dagger
\lr{
a^\dagger_\Bk
a_\Bp
+ (2\pi)^3 \delta^3(\Bk - \Bp)
}
\ket{0}
=
\inv{2}
a_\Bk^\dagger \ket{0}
=
\inv{2}
\ket{\Bk}_a,
\end{dmath}
and
\begin{dmath}\label{eqn:ProblemSet1Problem2:680}
Q \ket{\Bk}_b =
\frac{1}{2} \int
\frac{d^3 p}{(2\pi)^3}
\lr{
a_\Bp^\dagger a_\Bp - b_\Bp^\dagger b_\Bp
}
b^\dagger_\Bk \ket{0}
=
-\frac{1}{2} \int
\frac{d^3 p}{(2\pi)^3}
b_\Bp^\dagger b_\Bp
b^\dagger_\Bk \ket{0}
=
-\frac{1}{2} \int
\frac{d^3 p}{(2\pi)^3}
b_\Bp^\dagger
\lr{
b^\dagger_\Bk
b_\Bp
+ (2\pi)^3 \delta^3(\Bk - \Bp)
}
\ket{0}
=
-\inv{2}
b_\Bk^\dagger \ket{0}
=
-\inv{2}
\ket{\Bk}_b.
\end{dmath}
So, we could say that the particles associated with creation operator \( a_\Bp^\dagger \) have a (1/2) charge and
particles associated with creation operator \( b_\Bp^\dagger \) have a (-1/2) charge.
However, the \( 1/2 \), as well as the sign itself, was arbitrary, coming from the value of \( \theta \) used in the transformation of the field.   Therefore,
it is probably more accurate to say that the
\( a_\Bp^\dagger a_\Bp \) portion of the charge operator is associated with some unit of charge whereas the
\( b_\Bp^\dagger b_\Bp \) portion of the charge operator is associated with a unit of charge that has an opposite sign.
}
%}
